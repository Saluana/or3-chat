/**
 * Retro Theme Styles
 * 
 * All retro-specific CSS classes, extracted from global stylesheets.
 * These styles are only loaded when the retro theme is active.
 * 
 * This file contains the visual identity of the retro theme:
 * - Hard 2px borders
 * - Offset shadows (2px 2px)
 * - 3px border radius
 * - Pixel-perfect press animations
 */

/* Screen-reader only helper (follows inclusive components pattern) */
.sr-only {
	position: absolute;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip: rect(0 0 0 0);
	clip-path: inset(50%);
	white-space: nowrap;
	border: 0;
}

/* Retro "chip" toggle button used across dashboard settings */
.retro-chip,
.theme-chip {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding: 0.25rem 0.5rem;
	font-size: 0.75rem;
	font-weight: 500;
	user-select: none;
	border: 2px solid var(--md-inverse-surface);
	box-shadow: 2px 2px 0 var(--md-inverse-surface);
	border-radius: 3px;
	background: var(--md-surface);
	color: var(--md-on-surface);
	line-height: 1;
	transition: background-color 120ms ease, color 120ms ease,
		transform 80ms ease, box-shadow 80ms ease;
}
.retro-chip:hover,
.theme-chip:hover {
	background: var(--md-secondary-container);
	color: var(--md-on-secondary-container);
}
.retro-chip:active,
.theme-chip:active {
	transform: translate(2px, 2px);
	box-shadow: 0 0 0 var(--md-inverse-surface);
}
.retro-chip.active,
.theme-chip.active {
	background: var(--md-primary-container);
	color: var(--md-on-primary-container);
}
.retro-chip:focus-visible,
.theme-chip:focus-visible {
	outline: 2px solid var(--md-primary);
	outline-offset: 2px;
}

/* Retro text inputs (text + number inputs share the same base look) */
.retro-input,
.theme-input {
	height: 32px;
	padding: 0 6px;
	font-size: 12px;
	font-family: inherit;
	line-height: 1;
	border: 2px solid var(--md-inverse-surface);
	background: var(--md-surface);
	color: var(--md-on-surface);
	border-radius: 3px;
	box-shadow: 2px 2px 0 var(--md-inverse-surface);
}
.retro-input:focus-visible,
.theme-input:focus-visible {
	outline: 2px solid var(--md-primary);
	outline-offset: 2px;
}
textarea.retro-input,
textarea.theme-input {
	height: auto;
	padding-top: 6px;
	padding-bottom: 6px;
	line-height: 1.25;
}
.retro-input:disabled,
.theme-input:disabled {
	opacity: 0.5;
	cursor: not-allowed;
}

/* Primary retro button scaffold (used with Nuxt UI buttons) */
.retro-btn,
.theme-btn {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	line-height: 1;
	position: relative;
	border-radius: 3px;
	border: 2px solid var(--md-inverse-surface);
	box-shadow: 2px 2px 0 var(--md-inverse-surface);
	transition: transform 80ms ease, box-shadow 80ms ease;
}
.retro-btn.aspect-square,
.theme-btn.aspect-square {
	padding: 0;
	place-items: center;
}
.retro-btn:active,
.theme-btn:active {
	transform: translate(2px, 2px);
	box-shadow: 0 0 0 var(--md-inverse-surface),
		inset 0 2px 0 rgba(0, 0, 0, 0.25),
		inset 0 -2px 0 rgba(255, 255, 255, 0.12);
}
.retro-btn:focus-visible,
.theme-btn:focus-visible {
	outline: 2px solid var(--md-primary);
	outline-offset: 2px;
}
.retro-btn:disabled,
.theme-btn:disabled {
	opacity: 0.45;
	cursor: not-allowed;
	box-shadow: 2px 2px 0 color-mix(in oklab, var(--md-inverse-surface) 70%, transparent 30%);
}

/* Iconic copy button variant used in theme palette rows */
.retro-btn-copy,
.theme-copy-btn {
	height: 32px;
	padding: 0 8px;
	font-size: 10px;
	line-height: 1;
	border: 2px solid var(--md-inverse-surface);
	border-radius: 3px;
	background: var(--md-secondary-container);
	color: var(--md-on-secondary-container);
	box-shadow: 2px 2px 0 var(--md-inverse-surface);
	cursor: pointer;
	transition: transform 80ms ease, box-shadow 80ms ease,
		background-color 120ms ease, color 120ms ease;
}
.retro-btn-copy:disabled,
.theme-copy-btn:disabled {
	opacity: 0.4;
	cursor: not-allowed;
}
.retro-btn-copy:active:not(:disabled),
.theme-copy-btn:active:not(:disabled) {
	transform: translate(2px, 2px);
	box-shadow: 0 0 0 var(--md-inverse-surface);
}
.retro-btn-copy:focus-visible,
.theme-copy-btn:focus-visible {
	outline: 2px solid var(--md-primary);
	outline-offset: 2px;
}

/* Utility class for retro shadow (used globally) */
.retro-shadow,
.theme-shadow {
	box-shadow: 2px 2px 0 var(--md-inverse-surface);
}

/* Utility class for active/pressed state (used globally) */
.active-element {
	box-shadow: 0 0 0 var(--md-inverse-surface),
		inset 0 2px 0 rgba(0, 0, 0, 0.25),
		inset 0 -2px 0 rgba(255, 255, 255, 0.12);
}

/* Workspace backup component styles */
.retro-upload-panel,
.theme-upload-panel {
	border: 2px dashed color-mix(in oklab, var(--md-outline-variant) 85%, transparent 15%);
	border-radius: 6px;
	padding: 1rem;
	background: color-mix(in oklab, var(--md-surface) 94%, var(--md-surface-variant) 6%);
	box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--md-outline-variant) 55%, transparent 45%);
	transition: border-color 150ms ease, background 150ms ease;
}

.retro-upload-panel:has(button:hover),
.theme-upload-panel:has(button:hover) {
	border-color: color-mix(in oklab, var(--md-primary) 60%, transparent 40%);
}

.retro-upload-icon,
.theme-upload-icon {
	font-size: 1.5rem;
	color: var(--md-primary);
	flex-shrink: 0;
}

.retro-file-card,
.theme-file-card {
	margin-top: 0.75rem;
	display: flex;
	justify-content: space-between;
	gap: 1rem;
	padding: 0.75rem 0.9rem;
	border: 2px solid var(--md-inverse-surface);
	border-radius: 5px;
	background: color-mix(in oklab, var(--md-surface) 92%, var(--md-surface-variant) 8%);
	box-shadow: 2px 2px 0 var(--md-inverse-surface);
}

.retro-meta-panel,
.theme-meta-panel {
	border: 2px solid var(--md-inverse-surface);
	border-radius: 6px;
	background: color-mix(in oklab, var(--md-surface) 95%, var(--md-surface-variant) 5%);
	box-shadow: 2px 2px 0 var(--md-inverse-surface);
	padding: 1rem;
	display: grid;
	gap: 0.75rem;
}

.retro-meta-table,
.theme-meta-table {
	max-height: 11rem;
	overflow-y: auto;
	border: 2px dashed color-mix(in oklab, var(--md-outline-variant) 75%, transparent 25%);
	border-radius: 4px;
	padding: 0.5rem;
	display: grid;
	gap: 0.35rem;
}

.retro-meta-row,
.theme-meta-row {
	display: flex;
	align-items: center;
	justify-content: space-between;
	font-size: 0.75rem;
	padding: 0.2rem 0.35rem;
	background: color-mix(in oklab, var(--md-surface) 92%, transparent 8%);
	border-radius: 3px;
}

.retro-choice-btn,
.theme-choice-btn {
	border: 2px solid color-mix(in oklab, var(--md-inverse-surface) 92%, transparent 8%);
	background: color-mix(in oklab, var(--md-surface) 96%, var(--md-surface-variant) 4%);
	border-radius: 6px;
	box-shadow: 2px 2px 0 var(--md-inverse-surface);
	padding: 0.75rem;
	transition: box-shadow 120ms ease, background 120ms ease, color 120ms ease, border-color 120ms ease;
}

.retro-choice-btn:hover,
.theme-choice-btn:hover {
	border-color: var(--md-primary);
	background: color-mix(in oklab, var(--md-secondary-container) 70%, var(--md-surface) 30%);
	box-shadow: 3px 3px 0 var(--md-inverse-surface);
}

.retro-choice-btn:focus-visible,
.theme-choice-btn:focus-visible {
	outline: 2px solid var(--md-primary);
	outline-offset: 3px;
}

.retro-choice-btn--active,
.theme-choice-btn--active {
	background: color-mix(in oklab, var(--md-primary-container) 85%, var(--md-surface) 15%);
	color: var(--md-on-primary-container);
	border-color: var(--md-primary);
	box-shadow: 3px 3px 0 color-mix(in oklab, var(--md-primary) 70%, var(--md-inverse-surface) 30%);
}

.retro-choice-icon,
.theme-choice-icon {
	font-size: 1.4rem;
	color: currentColor;
}

.retro-checkbox,
.theme-checkbox {
	--checkbox-border: color-mix(in oklab, var(--md-inverse-surface) 80%, transparent 20%);
	padding: 0.5rem 0.25rem 0.5rem 0;
}

.retro-badge,
.theme-badge {
	--retro-badge-bg: color-mix(in oklab, var(--md-surface) 96%, var(--md-surface-variant) 4%);
	--retro-badge-fg: var(--md-on-surface);
	display: inline-flex;
	align-items: center;
	gap: 0.35rem;
	padding: 0.25rem 0.6rem;
	min-height: 1.5rem;
	border: 2px solid var(--md-inverse-surface);
	border-radius: 4px;
	background: var(--retro-badge-bg);
	color: var(--retro-badge-fg);
	box-shadow: 2px 2px 0 var(--md-inverse-surface);
	text-transform: uppercase;
	letter-spacing: 0.08em;
	font-weight: 600;
	line-height: 1;
}

.retro-badge--neutral,
.theme-badge--neutral {
	--retro-badge-bg: color-mix(in oklab, var(--md-surface) 95%, var(--md-surface-variant) 5%);
	--retro-badge-fg: var(--md-on-surface);
}

.retro-badge--primary,
.retro-badge--info,
.theme-badge--primary,
.theme-badge--info {
	--retro-badge-bg: color-mix(in oklab, var(--md-primary-container) 85%, var(--md-surface) 15%);
	--retro-badge-fg: var(--md-on-primary-container);
}

.retro-badge--success,
.theme-badge--success {
	--retro-badge-bg: color-mix(in oklab, var(--md-extended-color-success-color-container) 80%, var(--md-surface) 20%);
	--retro-badge-fg: var(--md-extended-color-success-on-color-container);
}

.retro-badge--error,
.theme-badge--error {
	--retro-badge-bg: color-mix(in oklab, var(--md-error-container) 85%, var(--md-surface) 15%);
	--retro-badge-fg: var(--md-on-error-container);
}

.retro-badge--warning,
.theme-badge--warning {
	--retro-badge-bg: color-mix(in oklab, var(--md-extended-color-warning-color-container) 80%, var(--md-surface) 20%);
	--retro-badge-fg: var(--md-extended-color-warning-on-color-container);
}

/* Shared motion reduction: keep retro UI snappy yet accessible */
@media (prefers-reduced-motion: reduce) {
	.retro-chip,
	.theme-chip,
	.retro-btn,
	.theme-btn,
	.retro-btn-copy,
	.theme-copy-btn,
	.retro-input,
	.theme-input,
	.retro-choice-btn,
	.theme-choice-btn,
	.retro-upload-panel,
	.theme-upload-panel,
	.retro-file-card,
	.theme-file-card {
		transition: none;
		transform: none;
	}
}

/* Retro Decorative Styles
 * Centralized retro-themed borders, shadows, and decorative elements.
 * These styles were previously hardcoded in individual components.
 * Keep color references using the MD3 theme system (--md-* variables).
 */

/* Section Card - Used in Dashboard pages (ThemePage, AiPage, WorkspaceBackupApp) */
.section-card {
    position: relative;
    padding: 1.25rem 1rem 1rem 1rem;
    border: 2px solid var(--md-inverse-surface);
    background: linear-gradient(
        0deg,
        color-mix(in oklab, var(--md-surface) 94%, var(--md-surface-variant) 6%),
        color-mix(in oklab, var(--md-surface) 90%, var(--md-surface-variant) 10%)
    );
    border-radius: 6px;
    box-shadow: 2px 2px 0 var(--md-inverse-surface);
}

/* Pattern Thumbnail - Used in ThemePage for background previews */
.pattern-thumb {
    width: 150px;
    height: 150px;
    border: 2px solid var(--md-inverse-surface);
    box-shadow: 2px 2px 0 var(--md-inverse-surface);
    background-color: var(--md-surface-variant);
    image-rendering: pixelated;
}

/* Drop Zone - Used in ThemePage for drag-and-drop upload areas */
.drop-zone {
    position: relative;
    overflow: hidden;
    cursor: pointer;
}

.drop-zone:focus-visible {
    outline: 2px solid var(--md-primary);
    outline-offset: 2px;
}

.drop-zone.is-dragover {
    outline: 2px dashed var(--md-primary);
    outline-offset: 2px;
}

.drop-zone .dz-hint {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    font-weight: 600;
    background: linear-gradient(rgba(0, 0, 0, 0.58), rgba(0, 0, 0, 0.58));
    color: #fff;
    opacity: 0;
    transition: opacity 0.18s ease;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.85), 0 0 0 1px rgba(0, 0, 0, 0.9);
    -webkit-text-stroke: 0.25px rgba(0, 0, 0, 0.6);
    backdrop-filter: brightness(0.85) saturate(0.9) contrast(1.15);
    mix-blend-mode: normal;
}

.drop-zone:is(:hover, :focus-visible, .is-dragover) .dz-hint {
    opacity: 1;
}

/* Workspace Backup App - Theme-specific components */
.theme-upload-panel {
    padding: 1.25rem;
    border: 2px dashed var(--md-outline-variant);
    border-radius: 6px;
    background: var(--md-surface-container-low);
}

.theme-file-card {
    margin-top: 1rem;
    padding: 1rem;
    border: 2px solid var(--md-inverse-surface);
    border-radius: 6px;
    background: var(--md-surface-container);
    box-shadow: 2px 2px 0 var(--md-inverse-surface);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
}

.theme-meta-panel {
    padding: 1rem;
    border: 2px solid var(--md-outline);
    border-radius: 6px;
    background: var(--md-surface-variant);
    box-shadow: 2px 2px 0 var(--md-outline);
}

.theme-meta-table {
    margin-top: 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.theme-meta-row {
    display: flex;
    justify-content: space-between;
    padding: 0.5rem;
    border-radius: 3px;
    background: var(--md-surface-container-low);
    font-size: 0.875rem;
}

.theme-badge {
    font-size: 0.75rem;
    font-weight: 600;
    border-radius: 3px;
}

.theme-badge--neutral {
    background: var(--md-surface-variant);
    color: var(--md-on-surface-variant);
}

.theme-badge--primary {
    background: var(--md-primary-container);
    color: var(--md-on-primary-container);
}

.theme-badge--success {
    background: var(--md-extended-color-success-color-container);
    color: var(--md-extended-color-success-on-color-container);
}

.theme-badge--error {
    background: var(--md-error-container);
    color: var(--md-on-error-container);
}

.theme-badge--warning {
    background: var(--md-extended-color-warning-color-container);
    color: var(--md-extended-color-warning-on-color-container);
}

.theme-badge--info {
    background: var(--md-secondary-container);
    color: var(--md-on-secondary-container);
}

.theme-upload-icon {
    width: 2rem;
    height: 2rem;
    flex-shrink: 0;
    opacity: 0.7;
}

.theme-choice-icon {
    width: 1.5rem;
    height: 1.5rem;
    flex-shrink: 0;
    opacity: 0.85;
}

.theme-checkbox {
    /* Checkbox styling can be left to Nuxt UI; placeholder for future needs */
}

/* Dashboard Landing Page Buttons */
.dashboard-landing-item {
	border-radius: 6px;
	/* Stronger default to match retro controls */
	border: 2px solid var(--md-inverse-surface);
	box-shadow: 2px 2px 0 var(--md-inverse-surface);
	transition: border-color 0.15s ease, box-shadow 0.15s ease, background-color 0.15s ease, transform 80ms ease;
}

.dashboard-landing-item:hover {
    border-color: var(--md-primary);
    box-shadow: 2px 2px 0 var(--md-primary);
}

/* Press and focus states to align with .retro-btn behavior */
button.dashboard-landing-item:active {
	transform: translate(2px, 2px);
	box-shadow: 0 0 0 var(--md-inverse-surface),
		inset 0 2px 0 rgba(0, 0, 0, 0.25),
		inset 0 -2px 0 rgba(255, 255, 255, 0.12);
}

button.dashboard-landing-item:focus-visible {
	outline: 2px solid var(--md-primary);
	outline-offset: 2px;
}

/* Model Catalog Item Cards */
.model-catalog-item {
    border-radius: 12px;
    border: 2px solid var(--md-inverse-surface);
    box-shadow: 2px 2px 0 var(--md-inverse-surface);
    transition: box-shadow 0.15s ease;
}

.model-catalog-item:hover {
    box-shadow: 3px 3px 0 var(--md-inverse-surface);
}

/* Model Catalog Header */
.model-catalog-header {
    border-bottom: 2px solid var(--md-inverse-surface);
}

/* Plugin Icon - Retro shadow and border effects */
.dashboard-plugin-icon-button.retro-style {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	gap: 0.5rem;
	border: 2px solid var(--md-inverse-surface);
	border-radius: 6px;
	background: var(--md-surface);
	color: var(--md-on-surface);
	box-shadow: 2px 2px 0 var(--md-inverse-surface);
	transition: transform 80ms ease,
		box-shadow 120ms ease,
		background-color 120ms ease,
		color 120ms ease,
		border-color 120ms ease;
}

.dashboard-plugin-icon-button.retro-style:hover {
	background: var(--md-secondary-container);
	color: var(--md-on-secondary-container);
	border-color: var(--md-primary);
	box-shadow: 3px 3px 0 var(--md-inverse-surface);
}

.dashboard-plugin-icon-button.retro-style:active {
	transform: translate(2px, 2px);
	box-shadow: 0 0 0 var(--md-inverse-surface),
		inset 0 2px 0 rgba(0, 0, 0, 0.25),
		inset 0 -2px 0 rgba(255, 255, 255, 0.12);
}

.dashboard-plugin-icon-button.retro-style:focus-visible {
	outline: 2px solid var(--md-primary);
	outline-offset: 2px;
}

.dashboard-plugin-icon-button.retro-style:disabled {
	opacity: 0.5;
	cursor: not-allowed;
	box-shadow: 2px 2px 0 color-mix(in oklab, var(--md-inverse-surface) 70%, transparent 30%);
}

/* Prompt Editor Header */
.prompt-editor-header {
    border-bottom: 2px solid var(--md-inverse-surface);
}

/* Fatal Error Details */
.fatal-error-details {
    border: 2px solid var(--md-inverse-surface);
    border-radius: 3px;
    box-shadow: 2px 2px 0 var(--md-inverse-surface);
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    .section-card,
    .drop-zone .dz-hint,
    .dashboard-landing-item,
    .model-catalog-item,
    .dashboard-plugin-icon-button.retro-style {
        transition: none;
    }
}
