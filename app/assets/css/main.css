/* Tailwind v4: single import includes preflight + utilities */
@import "tailwindcss";
@plugin "@tailwindcss/typography";

/* Nuxt UI base styles (load first so we can override its tokens below) */
@import "@nuxt/ui";

/* Removed tippy.js; mentions dropdown now uses Nuxt UI Popover */

/* Ensure Tailwind scans files outside srcDir (e.g. root-level app.config.ts)
	so classes used in Nuxt UI theme overrides are generated. */
@source "../../../app.config.ts";
@source "../../**/*.{vue,ts,tsx,js,jsx,mjs,mts,md,mdx}";


/* Your Material theme variable files (scoped: .light, .dark, etc.) */
@import "./theme.css";

/* Map Material variables to Nuxt UI tokens (loads last to win cascade) */
@import "~/assets/css/nuxt-ui-map.css";

/* Generic prose styles (theme-agnostic, renamed from prose-retro) */
@import "./or3-prose.css";

/* Theme-specific styles are loaded dynamically by the theme system via loadThemeStylesheets() */
/* DO NOT import theme styles here - they should only load when their theme is active */

/* Font setup: body uses VT323, headings use Press Start 2P */
:root {
	/* Dynamic current font choices (updated by theme settings) */
	--app-font-sans-current: var(--font-sans,
			"VT323",
			ui-sans-serif,
			system-ui,
			sans-serif);
	--app-font-heading-current: var(--font-heading,
			"Press Start 2P",
			ui-sans-serif,
			system-ui,
			sans-serif);
	--ui-radius: 3px;

	/* Theme customization variables (defaults mirror shipped design) */
	--app-font-size-root: 20px;
	/* base font size */
	--app-font-weight-root: 400;
	/* base font weight */
	--app-icon-size-base: 20px;
	/* default icon font size */
	/* Content background layer 1 */
	--app-content-bg-1: none;
	--app-content-bg-1-opacity: 1;
	/* Content background layer 2 (overlay) */
	--app-content-bg-2: none;
	--app-content-bg-2-opacity: 1;
	/* Repeat flag for content layers */
	--app-content-bg-repeat: repeat;
	/* Sidebar background */
	--app-sidebar-bg-1: none;
	--app-sidebar-bg-1-opacity: 1;
	--app-sidebar-bg-1-repeat: repeat;
}

.font-ps2 {
	font-family: var(--font-heading,
			"Press Start 2P",
			ui-sans-serif,
			system-ui,
			sans-serif) !important;
}

.font-vt323 {
	font-family: var(--font-sans,
			"VT323",
			ui-sans-serif,
			system-ui,
			sans-serif) !important;
}

html,
body {
	font-family: var(--app-font-sans-current, var(--font-sans)) !important;
	font-size: var(--app-font-size-root, 20px);
	font-weight: var(--app-font-weight-root, 400);
	height: 100%;
	min-height: 100%;
	overscroll-behavior: none;
}

body {
	overflow: hidden;
	background-color: var(--md-surface);
	touch-action: pan-y;
}

html,
body,
#__nuxt,
#__nuxt>div {
	height: 100%;
}

/* Reusable scrollbar style for inner scroll containers (Firefox specific props) */
.scrollbars {
	scrollbar-width: thin;
	scrollbar-color: var(--md-primary) transparent;
}

/* Hide scrollbar but keep scrolling (WebKit + Firefox) */
.scrollbar-hidden {
	scrollbar-width: none;
	/* Firefox */
	-ms-overflow-style: none;
	/* IE/Edge legacy */
}

.scrollbar-hidden::-webkit-scrollbar {
	width: 0;
	height: 0;
}

h1,
h2,
h3,
h4,
h5,
h6,
.font-heading {
	font-family: var(--app-font-heading-current, var(--font-heading)) !important;
}

.iconify,
.nui-icon,
.ui-icon {
	font-size: var(--app-icon-size-base, 20px);
	line-height: 1;
}

/* Theme-specific utility classes (theme-input, theme-btn, etc.) are now loaded 
   dynamically by each theme's stylesheet with proper scoping to prevent conflicts */

/* Global thin colored scrollbars (WebKit + Firefox) */
/* Firefox */
html {
	scrollbar-width: thin;
	/* thumb color, then track color */
	scrollbar-color: var(--md-primary) transparent;
}

/* WebKit (Chromium, Safari) */
/* Apply to all scrollable elements */
*::-webkit-scrollbar {
	width: 8px;
	height: 8px;
}

*::-webkit-scrollbar-track {
	background: transparent;
	border-radius: 9999px;
}

*::-webkit-scrollbar-thumb {
	background: var(--md-primary);
	border-radius: 9999px;
	border: 2px solid transparent;
	/* creates padding so the thumb appears thinner */
	background-clip: padding-box;
}

*::-webkit-scrollbar-thumb:hover {
	background: color-mix(in oklab, var(--md-primary) 85%, black);
}

*::-webkit-scrollbar-corner {
	background: transparent;
}

/* Sidebar scrollbar: auto-hide (only visible on hover) */
.sidebar-scroll.or3-scroll {
	scrollbar-width: thin;
	scrollbar-color: transparent transparent;
	scrollbar-gutter: stable;
	transition: scrollbar-color 0.2s ease;
}

.sidebar-scroll.or3-scroll:hover {
	scrollbar-color: var(--md-primary) transparent;
}

.sidebar-scroll.or3-scroll::-webkit-scrollbar-thumb {
	background: transparent;
	transition: background 0.2s ease;
}

.sidebar-scroll.or3-scroll:hover::-webkit-scrollbar-thumb {
	background: var(--md-primary);
}

.sidebar-scroll.or3-scroll:hover::-webkit-scrollbar-thumb:hover {
	background: color-mix(in oklab, var(--md-primary) 85%, black);
}

/* Hardcoded header pattern repeating horizontally */
.header-pattern-flipped {
	background-color: var(--md-surface-variant);
	background-image: var(--app-header-gradient, none);
	rotate: 180deg;
	background-repeat: repeat-x;
	background-position: left center;
	background-size: auto 100%;
}

/* Hardcoded header pattern repeating horizontally */
.header-pattern {
	background-color: var(--md-surface-variant);
	background-image: var(--app-header-gradient, none);
	background-repeat: repeat-x;
	background-position: left center;
	background-size: auto 100%;
}

/* Typography plugin sets its own strong color; ensure dark mode bold text uses on-surface token */
.dark .prose strong,
.dark .prosemirror-host :where(.ProseMirror) strong {
	color: var(--md-on-surface);
}

.hljs {
	background: transparent !important;
	/* override highlight.js default bg so it works in dark mode */
}

.center-it {
	display: flex;
	justify-content: center;
	align-items: center;
}

/* Sidebar item entry animation (fade + subtle slide) */
@keyframes sidebar-item-enter {
	from {
		opacity: 0;
		transform: translateY(-4px);
	}

	to {
		opacity: 1;
		transform: translateY(0);
	}
}

.animate-sidebar-item-enter {
	animation: sidebar-item-enter 200ms ease-out both;
}

/* Sidebar item exit animation (for collapse) */
@keyframes sidebar-item-exit {
	from {
		opacity: 1;
		max-height: 60px;
		margin-bottom: 2px;
	}

	to {
		opacity: 0;
		max-height: 0;
		margin-bottom: 0;
		padding-top: 0;
		padding-bottom: 0;
	}
}

.is-exiting {
	animation: sidebar-item-exit 200ms ease-out forwards;
	overflow: hidden;
}