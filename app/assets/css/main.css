/* Tailwind v4: single import includes preflight + utilities */
@import "tailwindcss";
@plugin "@tailwindcss/typography";

/* Nuxt UI base styles (load first so we can override its tokens below) */
@import "@nuxt/ui";

/* Removed tippy.js; mentions dropdown now uses Nuxt UI Popover */

/* Ensure Tailwind scans files outside srcDir (e.g. root-level app.config.ts)
	so classes used in Nuxt UI theme overrides are generated. */
@source "../../../app.config.ts";


/* Your Material theme variable files (scoped: .light, .dark, etc.) */
@import "./theme.css";

/* Map Material variables to Nuxt UI tokens (loads last to win cascade) */
@import "~/assets/css/nuxt-ui-map.css";

/* Generic prose styles (theme-agnostic, renamed from prose-retro) */
@import "./or3-prose.css";

/* mentions.css removed: .mention styles live in ChatInputDropper.vue */

/* Font setup: body uses VT323, headings use Press Start 2P */
:root {
	/* Tailwind v4 token vars (optional for font utilities) */
	--font-sans: "VT323", ui-sans-serif, system-ui, sans-serif;
	--font-heading: "Press Start 2P", ui-sans-serif, system-ui, sans-serif;
	/* Dynamic current font choices (updated by theme settings) */
	--app-font-sans-current: var(--font-sans);
	--app-font-heading-current: var(--font-heading);
    --ui-radius: 3px;

	/* Theme customization variables (defaults mirror shipped design) */
	--app-font-size-root: 20px; /* base font size */
	/* Content background layer 1 */
	--app-content-bg-1: none;
	--app-content-bg-1-opacity: 1;
	/* Content background layer 2 (overlay) */
	--app-content-bg-2: none;
	--app-content-bg-2-opacity: 1;
	/* Repeat flag for content layers */
	--app-content-bg-repeat: repeat;
	/* Sidebar background */
	--app-sidebar-bg-1: none;
	--app-sidebar-bg-1-opacity: 1;
	--app-sidebar-bg-repeat: repeat;
}

.font-ps2 {
	font-family: var(--font-heading) !important;
}

.font-vt323 {
	font-family: var(--font-sans) !important;
}

html, body {
        font-family: var(--app-font-sans-current, var(--font-sans)) !important;
    font-size: var(--app-font-size-root, 20px);
    height: 100%;
    min-height: 100%;
    overscroll-behavior: none;
}

body {
        overflow: hidden;
    background-color: var(--md-surface);
    touch-action: pan-y;
}

html,
body,
#__nuxt,
#__nuxt > div {
        height: 100%;
}

/* Reusable scrollbar style for inner scroll containers (Firefox specific props) */
.scrollbars {
	scrollbar-width: thin;
	scrollbar-color: var(--md-primary) transparent;
}

/* Hide scrollbar but keep scrolling (WebKit + Firefox) */
.scrollbar-hidden {
	scrollbar-width: none; /* Firefox */
	-ms-overflow-style: none; /* IE/Edge legacy */
}
.scrollbar-hidden::-webkit-scrollbar {
	width: 0;
	height: 0;
}

h1, h2, h3, h4, h5, h6, .font-heading {
	font-family: var(--app-font-heading-current, var(--font-heading)) !important;
}

/* Retro utility classes moved to ~/theme/retro/styles.css */
/* active-element and theme-shadow are still loaded from retro theme */
.theme-input,
.theme-btn,
.theme-btn-copy {
	box-sizing: border-box;
	font-family: inherit;
	text-transform: none;
}
.theme-input {
	height: 32px;
	padding: 0 6px;
	font-size: 12px;
	line-height: 1;
	border: 2px solid var(--md-inverse-surface);
	border-radius: 3px;
	background: var(--md-surface);
	color: var(--md-on-surface);
	box-shadow: 2px 2px 0 var(--md-inverse-surface);
}
.theme-input:focus-visible {
	outline: 2px solid var(--md-primary);
	outline-offset: 2px;
}
.theme-btn {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	border-radius: 3px;
	border: 2px solid var(--md-inverse-surface);
	box-shadow: 2px 2px 0 var(--md-inverse-surface);
	transition: transform 80ms ease, box-shadow 80ms ease;
	cursor: pointer;
}
.theme-btn-copy {
	padding: 0 8px;
	font-size: 10px;
	line-height: 1;
	border-radius: 3px;
	background: color-mix(in oklab, var(--md-surface) 70%, var(--md-surface-variant) 30%);
	color: var(--md-on-surface);
	box-shadow: 2px 2px 0 var(--md-inverse-surface);
}
.theme-shadow {
	box-shadow: 2px 2px 0 var(--md-inverse-surface);
}

/* Global thin colored scrollbars (WebKit + Firefox) */
/* Firefox */
html {
	scrollbar-width: thin;
	/* thumb color, then track color */
	scrollbar-color: var(--md-primary) transparent;
}

/* WebKit (Chromium, Safari) */
/* Apply to all scrollable elements */
*::-webkit-scrollbar {
	width: 8px;
	height: 8px;
}
*::-webkit-scrollbar-track {
	background: transparent;
	border-radius: 9999px;
}
*::-webkit-scrollbar-thumb {
	background: var(--md-primary);
	border-radius: 9999px;
	border: 2px solid transparent; /* creates padding so the thumb appears thinner */
	background-clip: padding-box;
}
*::-webkit-scrollbar-thumb:hover {
	background: color-mix(in oklab, var(--md-primary) 85%, black);
}
*::-webkit-scrollbar-corner { background: transparent; }

/* Hardcoded header pattern repeating horizontally */
.header-pattern-flipped {
    background-color: var(--md-surface-variant);
    background-image: var(--app-header-gradient, none);
    rotate: 180deg;
    background-repeat: repeat-x;
    background-position: left center;
    background-size: auto 100%;
}

/* Hardcoded header pattern repeating horizontally */
.header-pattern {
    background-color: var(--md-surface-variant);
    background-image: var(--app-header-gradient, none);
    background-repeat: repeat-x;
    background-position: left center;
    background-size: auto 100%;
}

/* Typography plugin sets its own strong color; ensure dark mode bold text uses on-surface token */
.dark .prose strong,
.dark .prosemirror-host :where(.ProseMirror) strong {
	color: var(--md-on-surface);
}

.hljs {
	background: transparent !important; /* override highlight.js default bg so it works in dark mode */
}
